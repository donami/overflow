{% extends "/layout/layout.twig" %}

{% block heading %}

  <div class="content-heading">

    <div class="options">

      <div class="options">
        {% if authed %}

          <a class="btn" href="{{ app.url.create('question/create') }}">Submit question</a>

        {% else %}

          <p><a class="btn" href="{{ app.url.create('login') }}">Login to post a question</a></p>

        {% endif %}
      </div>

    </div>

    {% if authed %}

      <h1>Welcome, {{ app.auth.user.getUsername() }}</h1>

    {% else %}

      <h1>Welcome</h1>

    {% endif %}

    <div class="breadcrumbs">

      {% for item in breadcrumb %}

          {% if item.url is not null %}
            <a href="{{ app.url.create(item.url) }}">{{ item.title }}</a> /
          {% else %}
            {{ item.title }}
          {% endif %}

      {% endfor %}

    </div>


  </div>

{% endblock %}

{% block content %}

  <div class="home-container">

    <div class="left-node">

      <div class="box">

        <div class="title">Welcome</div>

        <div class="content">

          <p>Laborum occaecat minim amet ex ut ex cillum. Ad eu laboris mollit laboris eiusmod sunt magna magna laborum duis ipsum dolor do anim dolore culpa. Consequat irure consectetur enim laboris aliqua nisi consequat ullamco est adipisicing. Occaecat veniam occaecat adipisicing occaecat pariatur est consequat non nisi. Incididunt velit id aute ullamco in nisi voluptate ea laboris amet aute velit deserunt quis duis. Ipsum deserunt consequat laboris ea dolor aliqua officia non non consectetur labore ad ut culpa tempor reprehenderit minim.</p>

        </div>

      </div>

      <div class="box">

        <div class="title">Most recent questions</div>

        <div class="content">

          {% if recentQuestions is empty %}

            <p>No recent questions found</p>

          {% else %}

            {% for question in recentQuestions %}

              <div>

                <ul class="recent-questions">
                  <li class="points{{ question.getBestAnswer() ? ' accepted' : '' }}">{{ question.getAnswers().count() }}</li>
                  <li><a href="{{ app.url.create('question?id=' ~ question.getId()) }}">{{ question.getTitle() }}</a></li>
                  <li class="meta">{{ question.getDateCreatedRaw() | time_diff }}</li>
                </ul>

              </div>

            {% endfor %}

          {% endif %}

        </div>

      </div>

    </div> <!-- / LEFT NODE -->

    <div class="right-node">

      <div class="box">

        <div class="title">Popular tags</div>

        <div class="content">

          {% if popularTags is empty %}

            <p>No tags found</p>

          {% else %}

            {% for tag in popularTags %}

                <a class="tag" href="{{ app.url.create('tag?tag=' ~ tag.getTitle())}}">{{ tag.getTitle() }}</a>

            {% endfor %}

          {% endif %}

        </div>

      </div>

      <div class="box">

        <div class="title">Most active users</div>

        <div class="content">

          {% if activeUsers is empty %}

            <p>No users found</p>

          {% else %}

            {% for user in activeUsers %}

              <div>

                <a href="{{ app.url.create('user?id=' ~ user.getId())}}">{{ user.getUsername()}}</a>

              </div>

            {% endfor %}

          {% endif %}

        </div>

      </div>

    </div> <!-- / RIGHT NODE -->

  </div> <!-- / HOME CONTAINER -->

{% endblock %}
